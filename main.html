<!DOCTYPE html>
<html>
<title>Genetic Drift Visualisation Tool</title>
<head>
    <link rel="stylesheet" type="text/css" href="css/toolStyle.css">
    <link rel="stylesheet" type="text/css" href="css/tooltipStyle.css">

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.1/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.4.0/Chart.min.js"></script>
    <script src="scripts/utils.js"></script>
    
    <script src="scripts/options.js"></script>
    <script src="scripts/simulation.js"></script>
</head>

<body>
<div class="main" id="header">
    Genetic Drift Visualisation Tool
</div>

<div class="main" id="toolbar">
    Reserved space for future versions.
</div>

<div class="main" id="jsBody">
    Loading. . .
</div>

<div class="main" id="copyright">
    Genetic Drift Visualisation Tool ver 0.1 <br>
    &copy 2016 David Chan
</div>

<script>
    var settings = {
        popSize: 50,
        numOfPop: 10,
        init: 1
    }; 
    var rng = new pseudoRandom();
    var alleles = new alleleObj(["A", "B", "C", "D", "E"]);
    var allSpecies = [];
    var ctx = null;
    var simGraph = null;

    function loadOptions() {
        $("#jsBody").load("dynamicPages/options.html");
    }

    function loadSimulation() {
        var i = 0,
            j = 0,
            newData = {},
            dummyData = [];
        for (i = 0; i < settings.numOfPop; i++) {
            allSpecies.push(new species(settings.popSize));
            dummyData.push(i+1);
            if (settings.init > 1) {
                allSpecies[i].mate(settings.init - 1);
            }
        }
        ctx = document.getElementById("simulationChart").getContext("2d");
        newData.labels = dummyData;
        newData.datasets = [];
            newData.datasets.push({label: "A",
                                data: dummyData,
                                backgroundColor: "rgba(127,201,127,1)"
            });
            newData.datasets.push({label: "B",
                                data: dummyData,
                                backgroundColor: "rgba(190,174,212,1)"
            });
            newData.datasets.push({label: "C",
                                data: dummyData,
                                backgroundColor: "rgba(253,192,134,1)"
            });
            newData.datasets.push({label: "D",
                                data: dummyData,
                                backgroundColor: "rgba(255,255,153,1)"
            });
            newData.datasets.push({label: "E",
                                data: dummyData,
                                backgroundColor: "rgba(56,108,176,1)"
            });
        simGraph = new Chart(ctx, {
            type: 'bar',
            data: newData,
            options: {
                scales: {
                    xAxes: [{
                        stacked: true   
                    }],
                    yAxes: [{
                        stacked: true
                    }]
                }
            }
        });

        $("#jsBody").load("dynamicPages/simulation.html");
        simGraphUpdate();
    }

    loadOptions();
</script>

</body>
</html>
